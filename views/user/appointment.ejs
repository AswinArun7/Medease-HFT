<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0" />
  <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.png" />
  <title>Preclinic - Medical & Hospital - Bootstrap 5 Admin Template</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

  <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.min.css" />

  <link rel="stylesheet" href="/assets/plugins/fontawesome/css/fontawesome.min.css" />
  <link rel="stylesheet" href="/assets/plugins/fontawesome/css/all.min.css" />

  <link rel="stylesheet" type="text/css" href="/assets/css/select2.min.css" />

  <link rel="stylesheet" href="/assets/css/bootstrap-datetimepicker.min.css" />

  <link rel="stylesheet" href="/assets/css/feather.css" />

  <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
</head>

<body>
  <div class="main-wrapper">
    <div class="header">
      <div class="header-left">
        <a href="index.html" class="logo">
          <img src="/assets/img/logo.png" width="35" height="35" alt />
          <span>Medease</span>
        </a>
      </div>
      <a id="toggle_btn" href="javascript:void(0);"><img src="/assets/img/icons/bar-icon.svg" alt /></a>
      <a id="mobile_btn" class="mobile_btn float-start" href="#sidebar"><img src="/assets/img/icons/bar-icon.svg"
          alt /></a>
      <div class="top-nav-search mob-view">
        <form>
          <input type="text" class="form-control" placeholder="Search here" />
          <a class="btn"><img src="/assets/img/icons/search-normal.svg" alt /></a>
        </form>
      </div>
      <ul class="nav user-menu float-end">
        <a href="/chat" style="text-decoration: none; margin-top: 14px;">
          <span class="user-img" style="display: flex; align-items: center; margin-left: 100px;">

            <img src="https://pbs.twimg.com/media/GDyl5j7aoAAMZ7X.jpg" alt="Admin"
              style="margin-right: 10px; transition: box-shadow 0.3s;"
              onmouseover="this.style.boxShadow='0 0 15px 5px #00D3C rgba(0,0,0,0.5)';"
              onmouseout="this.style.boxShadow='none';" />
            <h5 style="margin: 0; margin-right: 20px;">Ask Ai</h5>

          </span>
        </a>
        <li class="nav-item dropdown d-none d-md-block">
          <a href="#" class="dropdown-toggle nav-link" data-bs-toggle="dropdown"><img
              src="/assets/img/icons/note-icon-02.svg" alt /><span class="pulse"></span>
          </a>
          <div class="dropdown-menu notifications">
            <div class="topnav-dropdown-header">
              <span>Notifications</span>
            </div>
            <div class="drop-scroll">
              <ul class="notification-list">
                <li class="notification-message">
                  <a href="activities.html">
                    <div class="media">
                      <span class="avatar">
                        <img alt="John Doe" src="/assets/img/user.jpg" class="img-fluid" />
                      </span>
                      <div class="media-body">
                        <p class="noti-details">
                          <span class="noti-title">John Doe</span> added new
                          task
                          <span class="noti-title">Patient appointment booking</span>
                        </p>
                        <p class="noti-time">
                          <span class="notification-time">4 mins ago</span>
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="notification-message">
                  <a href="activities.html">
                    <div class="media">
                      <span class="avatar">V</span>
                      <div class="media-body">
                        <p class="noti-details">
                          <span class="noti-title">Tarah Shropshire</span>
                          changed the task name
                          <span class="noti-title">Appointment booking with payment gateway</span>
                        </p>
                        <p class="noti-time">
                          <span class="notification-time">6 mins ago</span>
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="notification-message">
                  <a href="activities.html">
                    <div class="media">
                      <span class="avatar">L</span>
                      <div class="media-body">
                        <p class="noti-details">
                          <span class="noti-title">Misty Tison</span> added
                          <span class="noti-title">Domenic Houston</span> and
                          <span class="noti-title">Claire Mapes</span> to
                          project
                          <span class="noti-title">Doctor available module</span>
                        </p>
                        <p class="noti-time">
                          <span class="notification-time">8 mins ago</span>
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="notification-message">
                  <a href="activities.html">
                    <div class="media">
                      <span class="avatar">G</span>
                      <div class="media-body">
                        <p class="noti-details">
                          <span class="noti-title">Rolland Webber</span>
                          completed task
                          <span class="noti-title">Patient and Doctor video conferencing</span>
                        </p>
                        <p class="noti-time">
                          <span class="notification-time">12 mins ago</span>
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="notification-message">
                  <a href="activities.html">
                    <div class="media">
                      <span class="avatar">V</span>
                      <div class="media-body">
                        <p class="noti-details">
                          <span class="noti-title">Bernardo Galaviz</span>
                          added new task
                          <span class="noti-title">Private chat module</span>
                        </p>
                        <p class="noti-time">
                          <span class="notification-time">2 days ago</span>
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
              </ul>
            </div>
            <div class="topnav-dropdown-footer">
              <a href="activities.html">View all Notifications</a>
            </div>
          </div>
        </li>
        <li class="nav-item dropdown d-none d-md-block">
          <a href="javascript:void(0);" id="open_msg_box" class="hasnotifications nav-link"><img
              src="/assets/img/icons/note-icon-01.svg" alt /><span class="pulse"></span>
          </a>
        </li>
        <li class="nav-item dropdown has-arrow user-profile-list">
          <a href="#" class="dropdown-toggle nav-link user-link" data-bs-toggle="dropdown">
            <!-- <div class="user-names">
                <h5>Liam Michael</h5>
                <span>Admin</span>
              </div> -->
            <span class="user-img">
              <img src="/assets/img/user-06.jpg" alt="Admin" />
            </span>
          </a>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="profile.html">My Profile</a>
            <a class="dropdown-item" href="edit-profile.html">Edit Profile</a>
            <a class="dropdown-item" href="settings.html">Settings</a>
            <a class="dropdown-item" href="login.html">Logout</a>
          </div>
        </li>
        <li class="nav-item">
          <a href="settings.html" class="hasnotifications nav-link"><img src="/assets/img/icons/setting-icon-01.svg"
              alt />
          </a>
        </li>
      </ul>
      <div class="dropdown mobile-user-menu float-end">
        <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><i
            class="fa-solid fa-ellipsis-vertical"></i></a>
        <div class="dropdown-menu dropdown-menu-end">
          <a class="dropdown-item" href="profile.html">My Profile</a>
          <a class="dropdown-item" href="edit-profile.html">Edit Profile</a>
          <a class="dropdown-item" href="settings.html">Settings</a>
          <a class="dropdown-item" href="login.html">Logout</a>
        </div>
      </div>
    </div>
    <div class="sidebar" id="sidebar"
      style="background-image: url('https://images.pexels.com/photos/5452231/pexels-photo-5452231.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1'); background-size: cover; background-position: center; display: flex; align-items: center; justify-content: center;">
      <div class="sidebar-inner slimscroll text-center"
        style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
        <div class="carousel-caption d-none d-md-block"
          style="position: relative; bottom: 80px; left: 10px; right: 0; padding: 2rem 1rem;; background-color: rgba(255, 0, 0, 0); color: #fff;">
          <h5 style="margin-bottom: 210px; color: #2E37A4; font-size: 30px;">Med<span style="color: green;">ease</span>
          </h5>
          <p style="margin: 0 auto;padding-top: 10px; ">"Your Trusted Companion on the Path to Wellness, Offering
            Compassionate Guidance and Seamless Solutions for Effortless Healthcare Access and Healing Every
            Step of the Way."</p>
        </div>

      </div>
    </div>
    <div class="page-wrapper">
      <div class="content">
        <div class="page-header">
          <div class="row">
            <div class="col-sm-12">
              <ul class="breadcrumb">
                <li class="breadcrumb-item">
                  <a href="/patient-dashboard">Dashboard </a>
                </li>
                <li class="breadcrumb-item">
                  <i class="feather-chevron-right"></i>
                </li>
                <li class="breadcrumb-item active">Book Appointment</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-12">
            <div class="card">
              <div class="card-header" style="background: white; border-bottom: 1px solid #e0e0e0; padding: 15px 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <h4 id="appointmentHeading" style="margin: 0; color: #333;">Book Appointment</h4>
                  <div style="display: flex; gap: 10px;">
                    <button id="bookAppointmentBtn" class="btn btn-primary"
                      style="border-radius: 5px; padding: 8px 20px;" onclick="switchTab('book')">
                      Book Appointment
                    </button>
                    <button id="myAppointmentsBtn" class="btn btn-outline-primary"
                      style="border-radius: 5px; padding: 8px 20px;" onclick="switchTab('my')">
                      My Appointments
                    </button>
                  </div>
                </div>
              </div>
              <div class="card-body">
                <!-- Success/Error Messages -->
                <div id="successMessage" class="alert alert-success alert-dismissible fade show" role="alert" style="display: none; border-left: 4px solid #28a745;">
                  <i class="fas fa-check-circle me-2"></i>
                  <strong>Success!</strong> Your appointment has been booked successfully.
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                <div id="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert" style="display: none; border-left: 4px solid #dc3545;">
                  <i class="fas fa-exclamation-circle me-2"></i>
                  <strong>Error!</strong> Failed to book appointment. Please try again.
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                
                <!-- Book Appointment Form Section -->
                <div id="bookAppointmentSection">
                  <form action="/book-appointment" method="post">
                    <div class="row">

                      <div class="col-12">
                        <div class="input-block local-top-form">
                          <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <label style="margin-bottom: 0; margin-right: 10px;">Appointment Mode <span
                                class="login-danger">*</span>:</label>
                            <div>
                              <input type="radio" id="online" name="mode" value="online" checked>
                              <label for="online"
                                style="margin-left: 5px; margin-right: 20px; margin-bottom: 0;">Online</label>
                              <input type="radio" id="offline" name="mode" value="offline">
                              <label for="offline" style="margin-left: 5px; margin-bottom: 0;">Offline</label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6 col-xl-4">
                        <div class="input-block local-forms">
                          <label>First Name
                            <span class="login-danger">*</span></label>
                          <input name="firstname" class="form-control" type="text" />
                        </div>
                      </div>
                      <div class="col-12 col-md-6 col-xl-4">
                        <div class="input-block local-forms">
                          <label>Last Name
                            <span class="login-danger">*</span></label>
                          <input name="lastname" class="form-control" type="text" />
                        </div>
                      </div>
                      <div class="col-12 col-md-6 col-xl-4">
                        <div class="input-block select-gender">
                          <div style="display: flex; align-items: center;">
                            <label style="margin-bottom: 0; margin-right: 10px;">Gender <span
                                class="login-danger">*</span>:</label>
                            <div>
                              <input type="radio" id="male" name="gender" value="male">
                              <label for="male"
                                style="margin-left: 5px; margin-right: 15px; margin-bottom: 0;">Male</label>
                              <input type="radio" id="female" name="gender" value="female">
                              <label for="female" style="margin-left: 5px; margin-bottom: 0;">Female</label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-12 col-md-6 col-xl-6">
                        <div class="input-block local-forms">
                          <label>Mobile <span class="login-danger">*</span></label>
                          <input name="mobile" class="form-control" type="text" />
                        </div>
                      </div>
                      <div class="col-12 col-md-6 col-xl-6">
                        <div class="input-block local-forms">
                          <label>Email <span class="login-danger">*</span></label>
                          <input name="email" class="form-control" type="email" value="<%= user && user.email ? user.email : '' %>" readonly style="background-color: #f8f9fa;" />
                        </div>
                      </div>
                      <div class="col-12 col-sm-12">
                        <div class="input-block local-forms">
                          <label>Address <span class="login-danger">*</span></label>
                          <textarea name="address" class="form-control" rows="3" cols="30"></textarea>
                        </div>
                      </div>

                      <div class="col-12 col-md-6 col-xl-3">
                        <div class="input-block local-forms">
                          <label>Hospital</label>
                          <select class="form-control" name="hospital" id="hospitalSelect">
                            <option value="">Select Hospital</option>
                            <% for( hospital of hospitals ) { %>
                              <option value="<%= hospital.uniqueCode %>"><%= hospital.username %> (<%= hospital.uniqueCode %>)
                              </option>
                              <% } %>


                                <!-- Add more hospitals here -->
                          </select>
                        </div>
                      </div>

                      <div class="col-12 col-md-6 col-xl-3">
                        <div class="input-block local-forms cal-icon">
                          <label>Date of Appointment
                            <span class="login-danger">*</span></label>
                          <input name="date" class="form-control datetimepicker" type="date" />
                        </div>
                      </div>
                      
                      <div class="col-12 col-md-6 col-xl-3">
                        <div class="input-block local-forms">
                          <label>Speciality</label>
                          <select class="form-control" name="specialty" id="specialtySelect">
                            <option value="">Select Speciality</option>
                            <option value="Cardiology">Cardiology</option>
                            <option value="Dermatology">Dermatology</option>
                            <option value="Endocrinology">Endocrinology</option>
                            <option value="Gastroenterology">Gastroenterology</option>
                            <option value="Hematology">Hematology</option>
                            <option value="Neurology">Neurology</option>
                            <option value="Oncology">Oncology</option>
                            <option value="Pediatrics">Pediatrics</option>
                            <option value="Pulmonology">Pulmonology</option>
                            <option value="Radiology">Radiology</option>
                          </select>
                        </div>
                      </div>
                      
                      <div class="col-12 col-md-6 col-xl-3">
                        <div class="input-block local-forms">
                          <label class="mb-2">Consulting Doctor <span class="text-danger">*</span></label>
                          <input type="hidden" name="doctor" id="selectedDoctorValue" />
                          <div class="doctor-selector-card" onclick="openDoctorSelector()" style="cursor: pointer; border: 2px solid #e0e0e0; border-radius: 8px; padding: 10px 12px; transition: all 0.3s; background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);">
                            <div class="d-flex align-items-center justify-content-between">
                              <div class="d-flex align-items-center flex-grow-1">
                                <div class="doctor-icon-wrapper" style="width: 35px; height: 35px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; margin-right: 10px; flex-shrink: 0;">
                                  <i class="fas fa-user-md" style="color: white; font-size: 16px;"></i>
                                </div>
                                <div id="selectedDoctorInfo" style="min-width: 0; flex: 1;">
                                  <div id="selectedDoctorDisplay" class="text-muted text-truncate" style="font-size: 13px; font-weight: 500;">
                                    Select doctor
                                  </div>
                                  <small id="selectedDoctorMeta" class="text-muted text-truncate" style="font-size: 11px; display: none;"></small>
                                </div>
                              </div>
                              <div class="arrow-icon" style="color: #667eea; font-size: 14px; margin-left: 8px;">
                                <i class="fas fa-chevron-right"></i>
                              </div>
                            </div>
                          </div>
                          <!-- Doctor data stored in hidden script tag -->
                          <script type="application/json" id="doctorData">
                            [
                              <% for(let i = 0; i < doctors.length; i++) { %>
                                {"name": "<%= doctors[i].firstname %>", "department": "<%= doctors[i].department %>", "hospital": "<%= doctors[i].hospital || '' %>"}<%- i < doctors.length - 1 ? ',' : '' %>
                              <% } %>
                            ]
                          </script>
                          <style>
                            .doctor-selector-card:hover {
                              border-color: #667eea !important;
                              box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
                              transform: translateY(-1px);
                            }
                            .doctor-selector-card.selected {
                              border-color: #667eea !important;
                              background: linear-gradient(135deg, #f0f3ff 0%, #ffffff 100%) !important;
                            }
                          </style>
                        </div>
                      </div>

                      <div class="col-12">
                        <div class="input-block local-forms">
                          <label>Symptoms / Reason for Visit <span class="login-danger">*</span></label>
                          <textarea name="Symptom" class="form-control" rows="3" cols="30" placeholder="Describe your symptoms or reason for consultation..."></textarea>
                        </div>
                      </div>

                      <div class="col-12">
                        <div class="doctor-submit text-end">
                          <button type="submit" class="btn btn-primary submit-form me-2">
                            Submit
                          </button>
                          <button type="button" class="btn btn-primary cancel-form">
                            Cancel
                          </button>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>

                <!-- My Appointments Section -->
                <div id="myAppointmentsSection" style="display: none;">
                  <div class="row">
                    <div class="col-12">
                      <h5 style="margin-bottom: 20px; color: #333;">Your Appointments</h5>
                      <% if (typeof appointments !== 'undefined' && appointments && appointments.length > 0) { %>
                        <div class="row">
                          <% for(let appointment of appointments) { %>
                            <div class="col-md-6 col-lg-4 mb-3">
                              <div class="card" style="border-radius: 10px; border: 2px solid #e8e8e8; transition: all 0.3s;">
                                <div class="card-body">
                                  <div class="d-flex align-items-center mb-3">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                                      <i class="fas fa-calendar-check" style="color: white; font-size: 18px;"></i>
                                    </div>
                                    <div>
                                      <h6 class="mb-0"><%= appointment.firstname %> <%= appointment.lastname %></h6>
                                      <small class="text-muted"><%= appointment.email %></small>
                                    </div>
                                  </div>
                                  <hr>
                                  <div class="appointment-details">
                                    <p class="mb-2"><strong><i class="fas fa-user-md me-2"></i>Doctor:</strong> Dr. <%= appointment.doctor %></p>
                                    <p class="mb-2"><strong><i class="fas fa-hospital me-2"></i>Hospital:</strong> <%= appointment.Hospital || 'N/A' %></p>
                                    <p class="mb-2"><strong><i class="fas fa-calendar me-2"></i>Date:</strong> <%= appointment.date %></p>
                                    <p class="mb-2"><strong><i class="fas fa-stethoscope me-2"></i>Specialty:</strong> <%= appointment.Symptom || 'N/A' %></p>
                                    <p class="mb-2"><strong><i class="fas fa-video me-2"></i>Mode:</strong> <span class="badge <%= appointment.mode === 'online' ? 'bg-success' : 'bg-primary' %>"><%= appointment.mode || 'offline' %></span></p>
                                  </div>
                                  <div class="mt-3">
                                    <button class="btn btn-sm btn-outline-primary w-100">View Details</button>
                                  </div>
                                </div>
                              </div>
                            </div>
                          <% } %>
                        </div>
                      <% } else { %>
                        <div class="alert alert-info" style="text-align: center; padding: 40px;">
                          <i class="fas fa-calendar-times"
                            style="font-size: 48px; color: #6c757d; margin-bottom: 15px;"></i>
                          <h6 style="color: #6c757d;">You have no appointments yet</h6>
                          <p class="text-muted">Book your first appointment to see it here</p>
                        </div>
                      <% } %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="notification-box">
          <div class="msg-sidebar notifications msg-noti">
            <div class="topnav-dropdown-header">
              <span>Messages</span>
            </div>
            <div class="drop-scroll msg-list-scroll" id="msg_list">
              <ul class="list-box">
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">R</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author">Richard Miles </span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item new-message">
                      <div class="list-left">
                        <span class="avatar">J</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author">John Doe</span>
                        <span class="message-time">1 Aug</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">T</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author"> Tarah Shropshire </span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">M</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author">Mike Litorus</span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">C</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author"> Catherine Manseau </span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">D</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author"> Domenic Houston </span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">B</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author"> Buster Wigton </span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">R</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author"> Rolland Webber </span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">C</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author"> Claire Mapes </span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">M</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author">Melita Faucher</span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">J</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author">Jeffery Lalor</span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">L</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author">Loren Gatlin</span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="chat.html">
                    <div class="list-item">
                      <div class="list-left">
                        <span class="avatar">T</span>
                      </div>
                      <div class="list-body">
                        <span class="message-author">Tarah Shropshire</span>
                        <span class="message-time">12:28 AM</span>
                        <div class="clearfix"></div>
                        <span class="message-content">Lorem ipsum dolor sit amet, consectetur
                          adipiscing</span>
                      </div>
                    </div>
                  </a>
                </li>
              </ul>
            </div>
            <div class="topnav-dropdown-footer">
              <a href="chat.html">See all messages</a>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Doctor Selection Modal -->
      <div id="doctorSelectionModal" class="modal fade" role="dialog">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content" style="border-radius: 12px; border: none; box-shadow: 0 10px 40px rgba(0,0,0,0.1);">
            <div class="modal-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px 12px 0 0; border: none; padding: 16px 20px;">
              <h6 class="modal-title text-white mb-0" style="font-weight: 600;">
                <i class="fas fa-user-md me-2"></i>Select a Doctor
              </h6>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="padding: 20px;">
              <div id="doctorListContainer" class="list-group" style="max-height: 350px; overflow-y: auto;">
                <!-- Doctor list will be populated here -->
              </div>
            </div>
            <div class="modal-footer" style="border-top: 1px solid #f0f0f0; padding: 12px 20px;">
              <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal" style="border-radius: 6px;">Cancel</button>
            </div>
          </div>
        </div>
      </div>
      
      <style>
        #doctorListContainer .list-group-item {
          border: 1px solid #e8e8e8;
          border-radius: 8px;
          margin-bottom: 8px;
          transition: all 0.3s;
          padding: 12px;
        }
        #doctorListContainer .list-group-item:hover {
          border-color: #667eea;
          background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);
          transform: translateX(5px);
          box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }
        #doctorListContainer::-webkit-scrollbar {
          width: 6px;
        }
        #doctorListContainer::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 10px;
        }
        #doctorListContainer::-webkit-scrollbar-thumb {
          background: #667eea;
          border-radius: 10px;
        }
        #doctorListContainer::-webkit-scrollbar-thumb:hover {
          background: #764ba2;
        }
        
        /* Appointment card hover effect */
        #myAppointmentsSection .card {
          transition: all 0.3s ease;
        }
        #myAppointmentsSection .card:hover {
          border-color: #667eea !important;
          box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
          transform: translateY(-5px);
        }
      </style>

      <div id="delete_patient" class="modal fade delete-modal" role="dialog">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-body text-center">
              <img src="/assets/img/sent.png" alt width="50" height="46" />
              <h3>Are you sure want to delete this ?</h3>
              <div class="m-t-20">
                <a href="#" class="btn btn-white" data-bs-dismiss="modal">Close</a>
                <button type="submit" class="btn btn-danger">Delete</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sidebar-overlay" data-reff></div>
    <script src="/assets/js/jquery-3.7.1.min.js"></script>
    <script src="/assets/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/feather.min.js"></script>
    <script src="/assets/js/jquery.slimscroll.js"></script>
    <script src="/assets/js/select2.min.js"></script>

    <script src="/assets/plugins/moment/moment.min.js"></script>
    <script src="/assets/js/bootstrap-datetimepicker.min.js"></script>
    <script src="/assets/js/app.js"></script>
    <script src="../../cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js"
      data-cf-settings="ecd1e107046e62ce658f5e7a-|49" defer></script>


    <script>
      // Get doctor data from JSON
      function getDoctorData() {
        const dataElement = document.getElementById('doctorData');
        if (dataElement) {
          return JSON.parse(dataElement.textContent);
        }
        return [];
      }

      // Filter doctors based on selected speciality and hospital
      function filterDoctorsBySpeciality() {
        // Reset doctor selection when specialty changes
        resetDoctorSelection();
      }

      // Also reset when hospital changes
      function filterDoctorsByHospital() {
        // Reset doctor selection when hospital changes
        resetDoctorSelection();
      }

      function resetDoctorSelection() {
        document.getElementById('selectedDoctorValue').value = '';
        document.getElementById('selectedDoctorDisplay').textContent = 'Click to select a doctor';
        document.getElementById('selectedDoctorDisplay').classList.add('text-muted');
        document.getElementById('selectedDoctorDisplay').classList.remove('text-dark');
        document.getElementById('selectedDoctorMeta').style.display = 'none';
        
        const selectorCard = document.querySelector('.doctor-selector-card');
        if (selectorCard) {
          selectorCard.classList.remove('selected');
        }
      }

      // Open doctor selector
      function openDoctorSelector() {
        const specialtySelect = document.getElementById('specialtySelect');
        const hospitalSelect = document.getElementById('hospitalSelect');
        const selectedSpecialty = specialtySelect ? specialtySelect.value : '';
        const selectedHospital = hospitalSelect ? hospitalSelect.value : '';

        if (!selectedSpecialty && !selectedHospital) {
          alert('Please select a Hospital or Speciality first before choosing a doctor.');
          return;
        }

        // Get all doctors and filter by specialty and/or hospital
        const allDoctors = getDoctorData();
        let filteredDoctors = allDoctors;

        // Filter by specialty if selected
        if (selectedSpecialty) {
          filteredDoctors = filteredDoctors.filter(doc => doc.department === selectedSpecialty);
        }

        // Filter by hospital if selected
        if (selectedHospital) {
          // Get hospital name from the select option text
          const hospitalOption = hospitalSelect.options[hospitalSelect.selectedIndex];
          const hospitalName = hospitalOption ? hospitalOption.text.split('(')[0].trim() : '';
          
          filteredDoctors = filteredDoctors.filter(doc => doc.hospital && doc.hospital.includes(hospitalName));
        }

        if (filteredDoctors.length === 0) {
          alert('No doctors available for the selected criteria.');
          return;
        }

        // Populate modal with doctor list
        const doctorListContainer = document.getElementById('doctorListContainer');
        doctorListContainer.innerHTML = '';

        filteredDoctors.forEach((doc, index) => {
          const doctorItem = document.createElement('button');
          doctorItem.className = 'list-group-item list-group-item-action';
          doctorItem.style.cursor = 'pointer';
          doctorItem.innerHTML = `
            <div class="d-flex align-items-center">
              <i class="fas fa-user-md me-3" style="font-size: 24px; color: #2E37A4;"></i>
              <div class="flex-grow-1 text-start">
                <strong>Dr. ${doc.name}</strong>
                <br>
                <small class="text-muted">${doc.department}${doc.hospital ? ' - ' + doc.hospital : ''}</small>
              </div>
            </div>
          `;
          
          doctorItem.addEventListener('click', function() {
            document.getElementById('selectedDoctorValue').value = doc.name;
            document.getElementById('selectedDoctorDisplay').textContent = 'Dr. ' + doc.name;
            document.getElementById('selectedDoctorDisplay').classList.remove('text-muted');
            document.getElementById('selectedDoctorDisplay').classList.add('text-dark');
            document.getElementById('selectedDoctorDisplay').style.fontWeight = '600';
            document.getElementById('selectedDoctorDisplay').style.color = '#2c3e50';
            
            // Show doctor metadata
            const metaElement = document.getElementById('selectedDoctorMeta');
            metaElement.textContent = `${doc.department}${doc.hospital ? ' • ' + doc.hospital : ''}`;
            metaElement.style.display = 'block';
            
            // Add selected state to card
            const selectorCard = document.querySelector('.doctor-selector-card');
            if (selectorCard) {
              selectorCard.classList.add('selected');
            }
            
            // Close modal using Bootstrap's modal instance
            const modalElement = document.getElementById('doctorSelectionModal');
            const modal = bootstrap.Modal.getInstance(modalElement);
            if (modal) {
              modal.hide();
            }
          });
          
          doctorListContainer.appendChild(doctorItem);
        });

        // Show the modal
        const doctorModal = new bootstrap.Modal(document.getElementById('doctorSelectionModal'));
        doctorModal.show();
      }

      // Add event listener to specialty and hospital selects
      document.addEventListener('DOMContentLoaded', function () {
        // Check for success or error messages in URL
        const urlParams = new URLSearchParams(window.location.search);
        const success = urlParams.get('success');
        const error = urlParams.get('error');
        
        if (success === 'true') {
          const successMsg = document.getElementById('successMessage');
          successMsg.style.display = 'block';
          // Switch to My Appointments tab to show the booked appointment
          switchTab('my');
          // Remove URL parameters
          window.history.replaceState({}, document.title, window.location.pathname);
          // Auto-hide after 5 seconds
          setTimeout(() => {
            successMsg.style.display = 'none';
          }, 5000);
        }
        
        if (error === 'true') {
          const errorMsg = document.getElementById('errorMessage');
          errorMsg.style.display = 'block';
          // Remove URL parameters
          window.history.replaceState({}, document.title, window.location.pathname);
          // Auto-hide after 5 seconds
          setTimeout(() => {
            errorMsg.style.display = 'none';
          }, 5000);
        }
        
        const specialtySelect = document.getElementById('specialtySelect');
        const hospitalSelect = document.getElementById('hospitalSelect');
        
        if (specialtySelect) {
          specialtySelect.addEventListener('change', filterDoctorsBySpeciality);
        }
        
        if (hospitalSelect) {
          hospitalSelect.addEventListener('change', filterDoctorsByHospital);
        }
      });

      function switchTab(tab) {
        const heading = document.getElementById('appointmentHeading');
        const bookBtn = document.getElementById('bookAppointmentBtn');
        const myBtn = document.getElementById('myAppointmentsBtn');
        const bookSection = document.getElementById('bookAppointmentSection');
        const mySection = document.getElementById('myAppointmentsSection');

        if (tab === 'book') {
          heading.textContent = 'Book Appointment';
          bookBtn.className = 'btn btn-primary';
          myBtn.className = 'btn btn-outline-primary';
          bookSection.style.display = 'block';
          mySection.style.display = 'none';
        } else if (tab === 'my') {
          heading.textContent = 'My Appointments';
          bookBtn.className = 'btn btn-outline-primary';
          myBtn.className = 'btn btn-primary';
          bookSection.style.display = 'none';
          mySection.style.display = 'block';
        }
      }
    </script>

</body>


</html>